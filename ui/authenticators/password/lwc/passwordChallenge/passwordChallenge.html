<template>
  <p if:true={loading}>
    <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
  </p>
  <c-exception-ui exception={error} if:true={error}></c-exception-ui>
  <form onsubmit={handleLogin} class="slds-p-left_large slds-p-right_large">

    <div class="slds-form-element">
      <label class="slds-form-element__label" for="text-input-password">Password<abbr class="slds-required" title="required">* </abbr></label>
      <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left">
        <lightning-icon size="x-small" class="slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default" icon-name="utility:lock"></lightning-icon>
        <input type="password" id="text-input-password" placeholder="Enter your password" class="slds-input" required oninput={handlePasswordChange} style="line-height: 42px;" autofocus/>
      </div>
    </div>
    <div class="slds-form-element" if:true={weak_password}>
      <label class="slds-form-element__label" for="text-input-new-password">New Password<abbr class="slds-required" title="required">* </abbr></label>
      <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left">
        <lightning-icon size="x-small" class="slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default" icon-name="utility:lock"></lightning-icon>
        <input type="password" id="text-input-current-password" placeholder="Enter a new password" class="slds-input" required oninput={handleNewPasswordChange} style="line-height: 42px;" autocomplete="current-password" />
      </div>
    </div>
    <div class="slds-text-align_right slds-p-around_x-small" if:true={context.forgotPasswordUrl} >
      <a href={context.forgotPasswordUrl} rel="noreferrer">
        <span class="slds-text-body_small">Forgot Password?</span>
      </a>
    </div>
    <div class="slds-p-top_large slds-text-align_center" if:false={weak_password}>
      <p><button class="slds-button slds-m_x-small slds-button_brand slds-button_stretch" type="submit">Login</button></p>
    </div>
    <div class="slds-p-top_large slds-text-align_center" if:true={weak_password}>
      <p><button class="slds-button slds-m_x-small slds-button_brand slds-button_stretch" type="submit">Reset Password</button></p>
    </div>
  </form>
</template>