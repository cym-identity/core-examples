<apex:page id="loginPage" showHeader="false" title="{!$Label.site.site_login}" controller="SiteLoginController" applyBodyTag="false" applyHtmlTag="false" docType="html-5.0">
  <html>
    <head>
      <title>Login</title>
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <style>
        html,
        body,
        body>div.slds-grid, body >div#container {
          height: 100%;
          min-height: 100%;
          background-color: {! backgroundColor };
        }
        #auraErrorMessage {
          display: none;
        }
      </style>
    </head>
    <body class="slds-scope">
      <apex:slds />
      <apex:includeLightning />
      <div class="slds-grid slds-grid_vertical-align-center slds-grid_align-center">
        <div class="slds-col slds-size_1-of-1" id="container" style="margin: auto;">
          <article class="slds-card" style="width:500px; height:500px; margin:auto;" id="loading">
            <div role="status" class="slds-spinner slds-spinner_medium">
              <span class="slds-assistive-text">Loading</span>
              <div class="slds-spinner__dot-a"></div>
              <div class="slds-spinner__dot-b"></div>
            </div>
          </article>
        </div>
      </div>
      <script type="text/javascript">
        try {
          $Lightning.use("c:loginApp", function () {
            $Lightning.createComponent("c:discoveryUi",
              {
                app: JSON.parse("{! JSENCODE(app_string) }"),
                registrationUrl: "{! JSENCODE(registrationUrl) }",
                forgotPasswordUrl: "{! JSENCODE(forgotPasswordUrl) }",
                socialProviders : JSON.parse("{! JSENCODE(socialLogins) }"),
                startURL : "{! JSENCODE(startURL) }",
                users : JSON.parse("{! JSENCODE(browserUsers) }"),
              },
              "container",
              function (cmp, status) {
                document.getElementById('loading').style.display = 'none';
              }
            );
          });
        } catch (e) {
          console.error(e);
        }
      </script>
    </body>
  </html>
</apex:page>
